{% extends "index.html" %}

{% block script  %}
  <script type='text/javascript' src='../js/jquery.min.js'></script>
  <script type='text/javascript' src='../js/bootstrap.js'></script>
  <link href="../css/datepicker.css" rel="stylesheet">
  <script src="../js/bootstrap-datepicker.js"></script>
  <script src="../js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="../css/datatables.css">	 
  <script src="../js/bootstrapPagination.js"></script>
  <script>
    $(document).ready(function() {

      $('#enterButton').click(function() {
        $('#enter_activity_modal').modal('show');
        $('#type').attr('value', '');
        $('#distance').attr('value', '');
        $('#duration').attr('value', '');
        $('#max_speed').attr('value', '');
        $('#date').attr('value', '');
      });

      $('#closeButton').click(function() {
        $('#enter_activity_modal').modal('hide');
      });

      var athleteTable = $('#athleteTable').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sPaginationType": "bootstrap",
        "sAjaxSource": "update_datatable",
        "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
        "aoColumns": [
          { "mData": "type", "sWidth": '25%' },
          { "mData": "date", "sWidth": '30%', "bSearchable": false },
          { "mData": "duration", "sWidth": '15%', "bSearchable": false },
          { "mData": "distance", "sWidth": '15%', "bSearchable": false },
          { "mData": "max_speed", "sWidth": '15%', "bSearchable": false }
        ]
      } );

      $('#dateInput').datepicker();

      $("form").submit(function() {
        $.post("create", $(this).serialize(), function() {
          athleteTable.fnDraw();
          $('#enter_activity_modal').modal('hide');
        } );
        return false;
      } );
    } );
  </script>
{% endblock script %}

{% block body %}
    <div align="right">
        <button type="button" id="enterButton" class="btn">Enter a New Event:</button>
    </div>
    <!-- TABLE ======================================= -->
    <table class="table table-bordered table-striped table-hover" id="athleteTable">
    <thead>
      <tr>
        <th>Type</th>
        <th>Date</th>
        <th>Duration</th>
        <th>Distance</th>
        <th>Max speed</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
 <!-- end table ======================================= -->
    <div class="modal hide fade" id="enter_activity_modal" name="enter_activity_modal">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="modal_title">Enter an Activity:</h3>
        </div>
        <form>
            <div class="modal-body">
                Type <input type="text" name="type" id="type" style="width: 10em;" required /><br/>
                Date <div class="input-append date" id="dateInput" data-date="26-02-2013" data-date-format="dd-mm-yyyy">
                        <input class="span2" name="date" id="date" size="16" type="text" >
                        <span class="add-on"><i class="icon-th"></i></span>
                     </div>
                Duration <input type="number" name="duration" id="duration" style="width: 4em;" min="0" required />
                Distance <input type="number" name="distance" id="distance" style="width: 4em;" min="0" required />
                Max Speed <input type="number" name="max_speed" id="max_speed" style="width: 4em;" min="0" required />
            </div>
            <div class="modal-footer">
                <a class="btn" id="closeButton">Close</a>
                <input class="btn btn-primary" id="saveButton" type="submit" value="Add Activity" />
            </div>
        </form>
    </div>  
 
{% endblock body %}
